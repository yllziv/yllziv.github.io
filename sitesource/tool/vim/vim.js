function selectLabel(e){editor=editors["code-"+String.fromCharCode(parseInt(e.id.substring(e.id.indexOf("-")+1))+96)],currentLabel=$("#"+e.id),currentLabel.blur(),$(currentLabel.attr("href")+" textarea").focus()}function editNew(){editor.doc.setValue("")}function addTab(){var e="[No Name]",t="tabs-"+tabCounter,a=$(tabTemplate.replace(/#\{href\}/g,"#"+t).replace(/#\{label\}/g,e).replace(/#\{labelid\}/g,"labels-"+tabCounter)),r="";tabs.find(".ui-tabs-nav").append(a),tabs.append("<div style='padding:0' id='"+t+"'><textarea  id='code-"+String.fromCharCode(96+tabCounter)+"' name='code'>"+r+"</textarea></div>"),tabs.tabs("refresh"),editor=CodeMirror.fromTextArea(document.getElementById("code-"+String.fromCharCode(96+tabCounter)),{lineNumbers:!0,mode:"text/x-csrc",vimMode:!0,theme:"lesser-dark",tabSize:2,showCursorWhenSelecting:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Ctrl-Insert":function(){addTab()},"Ctrl-Delete":function(){removeTab()},F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))}},foldGutter:{rangeFinder:new CodeMirror.fold.combine(CodeMirror.fold.brace,CodeMirror.fold.comment)},gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],styleActiveLine:!0,matchBrackets:!0,autofocus:!0}),editors["code-"+String.fromCharCode(96+tabCounter)]=editor,$("#labels-"+tabCounter).click(),editor.doc.setValue(""),$("#tabs-"+tabCounter+" textarea").focus(),tabCounter++}function removeTab(){var e=currentLabel.attr("href");$(e).remove(),tabs.tabs("refresh")}function readBlob(e,t){var a=document.getElementById("files").files;if(!a.length)return void alert("Please select a file!");var r=a[0],o=parseInt(e)||0,i=parseInt(t)||r.size-1,s=new FileReader;s.onloadend=function(e){if(e.target.readyState==FileReader.DONE){var t="";switch(currentLabel.text(r.name),t=r.name.substring(r.name.lastIndexOf(".")+1)){case"html":case"htm":var a={name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]};editor.setOption("mode",a);break;case"js":editor.setOption("mode","text/javascript");break;case"json":editor.setOption("mode","application/json");break;case"go":editor.setOption("mode","text/x-go");break;case"markdown":case"mdown":case"mkdn":case"md":case"mkd":case"mdwn":case"mdtxt":case"mdtext":case"text":editor.setOption("mode","text/x-markdown");break;case"py":editor.setOption("mode","text/x-python");break;case"xml":editor.setOption("mode","application/xml");break;case"pl":editor.setOption("mode","text/x-perl");break;case"php":editor.setOption("mode","text/x-php");break;case"rb":editor.setOption("mode","text/x-ruby");break;case"tcl":editor.setOption("mode","text/x-tcl");break;case"vb":editor.setOption("mode","text/x-vb");break;case"vbs":editor.setOption("mode","text/vbscript");break;case"cs":editor.setOption("mode","text/x-csharp");break;case"c":editor.setOption("mode","text/x-csrc");break;case"cpp":editor.setOption("mode","text/x-c++src");break;case"java":editor.setOption("mode","text/x-java");break;case"css":editor.setOption("mode","text/css")}editor.doc.setValue(e.target.result)}};var n=r.slice(o,i+1);s.readAsBinaryString(n)}function download(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.click()}$(document).ready(function(){$("iframe",window.parent.document).height($("#vim").height()),$(window).resize(function(){$("iframe",window.parent.document).height($("#vim").height())}),editor.doc.setValue(vimTaskArray[0])}),$("#newtab").click(function(){addTab()}),$("#new").click(function(){editNew()}),$("#save").click(function(){download("formyll.txt",editor.doc.getValue())}),$("#file").buttonset(),$("#chooseTask").change(function(){switch($("#chooseTask").val()){case"1":editor.doc.setValue(vimTaskArray[0]);break;case"2":editor.doc.setValue(vimTaskArray[1]);break;case"3":editor.doc.setValue(vimTaskArray[2]);break;case"4":editor.doc.setValue(vimTaskArray[3]);break;case"5":editor.doc.setValue(vimTaskArray[4]);break;case"6":editor.doc.setValue(vimTaskArray[5]);break;case"7":editor.doc.setValue(vimTaskArray[6]);break;case"8":editor.doc.setValue(vimTaskArray[7]);break;case"9":editor.doc.setValue(vimTaskArray[8]);break;case"10":editor.doc.setValue(vimTaskArray[9])}});var tabTitle=$("#tab_title"),tabContent=$("#tab_content"),tabTemplate="<li><a id='#{labelid}' href='#{href}' onclick='selectLabel(this)'>#{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>",tabCounter=1,tabs=$("#tabs").tabs(),dialog=$("#dialog").dialog({autoOpen:!1,modal:!0,buttons:{Add:function(){addTab(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}},close:function(){form[0].reset()}}),form=dialog.find("form").submit(function(e){addTab(),dialog.dialog("close"),e.preventDefault()}),currentLabel=$("#labels-1");tabs.delegate("span.ui-icon-close","click",function(){var e=$(this).closest("li").remove().attr("aria-controls");$("#"+e).remove(),tabs.tabs("refresh")}),tabs.bind("keyup",function(e){if(e.altKey&&e.keyCode===$.ui.keyCode.BACKSPACE){var t=tabs.find(".ui-tabs-active").remove().attr("aria-controls");$("#"+t).remove(),tabs.tabs("refresh")}});var editors=new Array,editor;$("#open").click(function(){$("#files").click()}),addTab();